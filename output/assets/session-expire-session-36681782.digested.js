(()=>{"use strict";class e extends Error{}class t{static get token(){return this.#e?.content||null}static set token(e){e&&(this.#e&&(this.#e.content=e),this.#t.forEach((t=>{t.value=e})))}static get param(){return this.#n?.content}static get#e(){return document.querySelector('meta[name="csrf-token"]')}static get#n(){return document.querySelector('meta[name="csrf-param"]')}static get#t(){return document.querySelectorAll(`input[name="${this.param}"]`)}}function n(e){let{live:t,timeout:n}=e;return t?{isLive:!0,timeout:new Date(n)}:{isLive:!1}}function o(e){if(401===e.status)return{live:!1,timeout:null};throw e}const s=document.getElementById("session-timeout-cntnr"),a=1e3*Number(s.dataset.warning),r=s.dataset.sessionsUrl,i=1e3*Number(s.dataset.sessionTimeoutIn),c=document.querySelector("lg-modal.session-timeout-modal"),u=document.getElementById("session-keepalive-btn"),l=c.querySelectorAll("lg-countdown");let m=new Date(Date.now()+i);function d(){c.show(),l.forEach((e=>{e.expiration=m,e.start()}))}u.addEventListener("click",(function(s){new Date>m||(s.preventDefault(),c.hide(),m=new Date(Date.now()+i),setTimeout(d,i-a),l.forEach((e=>e.stop())),(s=>{(async function(n){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{csrf:s=!0,json:a=!0,read:r=!0,...i}=o;let{body:c,headers:u}=i;if(u=new Headers(u),s&&(e=>!!e.method&&!["GET","HEAD"].includes(e.method.toUpperCase()))(i)){const e="boolean"==typeof s?t.token:s();e&&u.set("X-CSRF-Token",e)}a&&(u.set("Content-Type","application/json"),u.set("Accept","application/json"),"boolean"!=typeof a&&(c=JSON.stringify(a)));const l=await fetch(n,{...i,headers:u,body:c});if(t.token=l.headers.get("X-CSRF-Token"),r){if(!l.ok){const t=new e;throw t.status=l.status,t}return a?l.json():l.text()}return l})(s,{method:"PUT"}).catch(o).then(n)})(r))})),setTimeout(d,i-a)})();
//# sourceMappingURL=session-expire-session-36681782.digested.js.map