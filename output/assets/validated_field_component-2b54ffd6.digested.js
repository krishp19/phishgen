(()=>{"use strict";class e extends HTMLElement{connectedCallback(){this.input=this.querySelector(".validated-field__input"),this.inputWrapper=this.querySelector(".validated-field__input-wrapper"),this.errorMessage=this.ownerDocument.getElementById(this.errorId),this.input?.addEventListener("input",(()=>this.setErrorMessage())),this.input?.addEventListener("input",(()=>this.setInputIsValid(!0))),this.input?.addEventListener("invalid",(e=>this.toggleErrorMessage(e)))}get errorStrings(){try{return JSON.parse(this.querySelector(".validated-field__error-strings")?.textContent||"")}catch{return{}}}get errorId(){return this.getAttribute("error-id")}get descriptorIdRefs(){return this.input?.getAttribute("aria-describedby")?.split(" ").filter(Boolean)||[]}get isValid(){return"true"!==this.input?.getAttribute("aria-invalid")}toggleErrorMessage(e){e.preventDefault();const t=this.getNormalizedValidationMessage(this.input),r=!t;this.setErrorMessage(t),this.focusOnError(r),this.setInputIsValid(r)}setErrorMessage(e){e?(this.getOrCreateErrorMessageElement(),this.errorMessage.textContent=e,this.errorMessage.classList.remove("display-none")):this.errorMessage&&(this.errorMessage.textContent="",this.errorMessage.classList.add("display-none"))}setInputIsValid(e){if(e===this.isValid)return;this.input?.classList.toggle("usa-input--error",!e),this.input?.setAttribute("aria-invalid",String(!e));const t=this.descriptorIdRefs.filter((e=>e!==this.errorId));e||t.push(this.errorId),this.input?.setAttribute("aria-describedby",t.join(" "))}getNormalizedValidationMessage(e){if(!e||e.validity.valid)return"";for(const t in e.validity)if("valid"!==t&&e.validity[t]&&this.errorStrings[t])return this.errorStrings[t];return e.validationMessage}getOrCreateErrorMessageElement(){return this.errorMessage||(this.errorMessage=this.ownerDocument.createElement("div"),this.errorMessage.classList.add("usa-error-message"),this.errorMessage.id=this.errorId,this.inputWrapper?.appendChild(this.errorMessage)),this.errorMessage}focusOnError(e){e||document.activeElement?.classList.contains("usa-input--error")||this.input?.focus()}}customElements.get("lg-validated-field")||customElements.define("lg-validated-field",e)})();
//# sourceMappingURL=validated_field_component-2b54ffd6.digested.js.map