(()=>{"use strict";let t;const e=(e,a)=>{let{name:n,message:i,stack:r}=e,{filename:c,errorId:s}=a;return function(e,a){const n=function(e){if(void 0===t)try{t=JSON.parse(document.querySelector("[data-config]")?.textContent||"")}catch{t={}}return t[e]}("analyticsEndpoint");if(n&&navigator.sendBeacon){const t=JSON.stringify({event:"Frontend Error",payload:a}),e=new Blob([t],{type:"application/json"});navigator.sendBeacon(n,e)}}(0,{name:n,message:i,stack:r,filename:c,error_id:s})};class a extends HTMLElement{connectedCallback(){this.form=this.closest("form"),this.form?.addEventListener("submit",this.handleFormSubmit)}disconnectedCallback(){this.form?.removeEventListener("submit",this.handleFormSubmit)}get button(){return this.querySelector("button")}get tokenInput(){return this.querySelector("[type=hidden]")}get recaptchaSiteKey(){return this.getAttribute("recaptcha-site-key")}get recaptchaAction(){return this.getAttribute("recaptcha-action")}get isRecaptchaEnterprise(){return"true"===this.getAttribute("recaptcha-enterprise")}get recaptchaClient(){return this.isRecaptchaEnterprise?globalThis.grecaptcha?.enterprise:globalThis.grecaptcha}submit(){this.form?.submit()}invokeChallenge(){this.#t((async()=>{const{recaptchaSiteKey:t,recaptchaAction:a}=this;let n;try{n=await this.recaptchaClient.execute(t,{action:a}),this.tokenInput.value=n}catch(t){e(t,{errorId:"recaptchaExecute"})}this.submit()}))}shouldInvokeChallenge(){return!!this.recaptchaSiteKey}handleFormSubmit=t=>{this.shouldInvokeChallenge()&&(t.preventDefault(),this.invokeChallenge())};#t(t){if(this.recaptchaClient)this.recaptchaClient.ready(t);else{const e=setTimeout((()=>this.submit()),5e3),a=()=>clearTimeout(e);globalThis.___grecaptcha_cfg??={fns:[]},globalThis.___grecaptcha_cfg.fns.push(a,t)}}}customElements.get("lg-captcha-submit-button")||customElements.define("lg-captcha-submit-button",a)})();
//# sourceMappingURL=captcha_submit_button_component-daf6ca98.digested.js.map